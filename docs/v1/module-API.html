<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: API</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: API</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">API module.</div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api.js.html">api.js</a>, <a href="api.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="~IDCheckingMiddleware"><span class="type-signature">(inner) </span>ID Checking Middleware<span class="type-signature"></span></h4>




<div class="description">
    This middleware is set at the beginning of the API, after the <code>/</code> endpoint,to check if the user has a valid id.<br/>If there is no id information, or the id is from an expired user, an error is returned.If the id stored in the cookies is valid, then the request can continue, (<code>next()</code>).
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api.js.html">api.js</a>, <a href="api.js.html#line44">line 44</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="~/"><span class="type-signature">(inner) </span>/<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <strong>ENDPOINT.</strong><br/>The root (<tt>/</tt>) endpoint allows us to create a <strong>user session</strong>.<br/>Tot groups each set of detectors (and hence results) under an user object(see <a href="module-Users.html">Users</a>), univocally identified with an id (generated with<a target="_blank" href="https://www.npmjs.com/package/uniqid">uniqid</a>) stored as a<strong>cookie</strong>, so the users have to send their id along with their request in order to perform any operation. <strong>The users cannot communicate with any otherendpoint if they haven't been given an id</strong>.When a new request for this endpoint arrives, the request's cookies are checked:<ul>	<li>If there is no id, then a new user is created, and its unique id is stored inthe response's cookies.</li>	<li>If there is an user id in the cookies, then that user's session is refreshed.If said id is from an expired user, then a new user (and id) is created.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api.js.html">api.js</a>, <a href="api.js.html#line15">line 15</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~/analyse"><span class="type-signature">(inner) </span>/analyse<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <strong>ENDPOINT.</strong><br/>The <tt>/analyse</tt> endpoint allows us to request for the analysis of some media file.The request will recieve up to 3 parameters: <br/><ul>	<li><tt>mediaType</tt>: Kind of media which will be sent. Options can be "image", "video", "sound" and "text".</li>	<li><tt>lookingFor</tt>: Feature we want to analyse. Options can be "face", "voice", "signal" and "body".</li>	<li><tt>mediaPath</tt>: Absolute path to the file which contains the media. This can be a local path or an Internet address.</li></ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api.js.html">api.js</a>, <a href="api.js.html#line165">line 165</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~/init"><span class="type-signature">(inner) </span>/init<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <strong>ENDPOINT.</strong><br/>The <tt>/init</tt> endpoint allows us to initialize the whole system.<br/>The setting information can be received through the request itself (<code><strong>settings</strong></code> parameter), or through a file, in which case the path to said file must be indicated in the request(<code><strong>settingsPath</strong></code>). Please keep in mind that the route to the file starts at the root of the project(<code>tot-system/...</code>).
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api.js.html">api.js</a>, <a href="api.js.html#line65">line 65</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~/results"><span class="type-signature">(inner) </span>/results<span class="signature">(channelsToMerge<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <strong>ENDPOINT.</strong><br/>The <code>/results</code> endpoint returns a single triplet as a result of aggregatingall the previous results from emotion detectors in the PAD format. The aggregation process has threelevels:<ol>	<li>Each <code>detector</code> aggregates its results applying the <code>localStrategy</code> strategy,	turning a PAD results array into a single PAD triplet. At this point, we have a PAD triplet per detector.</li>	<li>These triplets are aggregated again, using the <code>localStrategy</code> strategy, but grouping them	by <strong>channel</strong>. At this point, we have a PAD triplet per emotion channel.</li>	<li>Finally, these channels' triplets are aggregated using the <code>globalStrategy</code> strategy,	producing the final PAD triplet which is returned to the user.</li></ol>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>channelsToMerge</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">Array of emotion channels to merge.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api.js.html">api.js</a>, <a href="api.js.html#line221">line 221</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~/setup"><span class="type-signature">(inner) </span>/setup<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <strong>ENDPOINT.</strong><br/>The <tt>/setup</tt> endpoint allows us to customize a little bit your set of detectores.The request will recieve up to 3 parameters, all of them optional: <br/><ul>	<li><tt>type</tt>: Array of the detector categories you want to keep. Detector categories which are not in this array will be deteled.	An empty array deteles every category.</li>	<li><tt>realTime</tt>: Boolean which states if you want detectors which work in real time or not.</li>	<li><tt>delay</tt>: Upper threshold of the delay attribute. The delay attribute is set in the /initialize endpoint and represents the average time that	a certain detector needs to fulfil a request. Detectors whose delay attribute is bigger than the delay parameter will be deleted.</li></ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="api.js.html">api.js</a>, <a href="api.js.html#line127">line 127</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-API.html">API</a></li><li><a href="module-Core.html">Core</a></li><li><a href="module-Detector.html">Detector</a></li><li><a href="module-Merge.html">Merge</a></li><li><a href="module-Operations.html">Operations</a></li><li><a href="module-Users.html">Users</a></li></ul><h3>Classes</h3><ul><li><a href="Detector.html">Detector</a></li><li><a href="DetectorHandler.html">DetectorHandler</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Wed Nov 06 2019 18:18:43 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>